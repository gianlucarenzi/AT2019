EESchema Schematic File Version 4
LIBS:atari23MTS_Upgrade-cache
EELAYER 26 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 4 5
Title "MCU STM32F407VET6 SDCARD & CART"
Date "2019-04-06"
Rev ""
Comp "RetroBit Lab"
Comment1 "MULTI CARD MPU Interface"
Comment2 "STM32F407 for ROM and Cartridge Emulation"
Comment3 ""
Comment4 ""
$EndDescr
NoConn ~ 5000 950 
Text GLabel 4400 1250 0    39   Input ~ 0
nRESET_CART
Text GLabel 4400 1450 0    39   Input ~ 0
BOOT0_CART
NoConn ~ 4400 1650
NoConn ~ 4400 1750
Text GLabel 4400 1850 0    39   Input ~ 0
VCC3V3
$Comp
L Device1:Crystal_Small XT1
U 1 1 5CA87C40
P 2500 2700
F 0 "XT1" H 2500 2800 50  0000 C CNN
F 1 "8Mhz" H 2500 2600 50  0000 C CNN
F 2 "RetroBitLab:Crystal_HC49-4H_Vertical_3D" H 2500 2700 50  0001 C CNN
F 3 "" H 2500 2700 50  0000 C CNN
	1    2500 2700
	0    1    1    0   
$EndComp
$Comp
L Device1:C_Small C6
U 1 1 5CA87C41
P 2100 2350
F 0 "C6" H 2110 2420 50  0000 L CNN
F 1 "20p" H 2110 2270 50  0000 L CNN
F 2 "Capacitor_SMD:C_1206_3216Metric_Pad1.42x1.75mm_HandSolder" H 2100 2350 50  0001 C CNN
F 3 "" H 2100 2350 50  0000 C CNN
	1    2100 2350
	0    1    1    0   
$EndComp
$Comp
L Device1:C_Small C7
U 1 1 5C421D1B
P 2100 3050
F 0 "C7" H 2110 3120 50  0000 L CNN
F 1 "20p" H 2110 2970 50  0000 L CNN
F 2 "Capacitor_SMD:C_1206_3216Metric_Pad1.42x1.75mm_HandSolder" H 2100 3050 50  0001 C CNN
F 3 "" H 2100 3050 50  0000 C CNN
	1    2100 3050
	0    1    1    0   
$EndComp
$Comp
L power1:GND #PWR038
U 1 1 5C421D68
P 1750 2700
F 0 "#PWR038" H 1750 2450 50  0001 C CNN
F 1 "GND" H 1750 2550 50  0000 C CNN
F 2 "" H 1750 2700 50  0001 C CNN
F 3 "" H 1750 2700 50  0001 C CNN
	1    1750 2700
	0    1    1    0   
$EndComp
$Comp
L Device1:C_Small C9
U 1 1 5CA87C44
P 8600 850
F 0 "C9" H 8610 920 50  0000 L CNN
F 1 "100n" H 8610 770 50  0000 L CNN
F 2 "Capacitor_SMD:C_1206_3216Metric_Pad1.42x1.75mm_HandSolder" H 8600 850 50  0001 C CNN
F 3 "" H 8600 850 50  0000 C CNN
	1    8600 850 
	0    1    1    0   
$EndComp
$Comp
L Device1:C_Small C10
U 1 1 5CA87C45
P 8600 1200
F 0 "C10" H 8610 1270 50  0000 L CNN
F 1 "100n" H 8610 1120 50  0000 L CNN
F 2 "Capacitor_SMD:C_1206_3216Metric_Pad1.42x1.75mm_HandSolder" H 8600 1200 50  0001 C CNN
F 3 "" H 8600 1200 50  0000 C CNN
	1    8600 1200
	0    1    1    0   
$EndComp
$Comp
L Device1:C_Small C11
U 1 1 5CA87C46
P 8600 1550
F 0 "C11" H 8610 1620 50  0000 L CNN
F 1 "100n" H 8610 1470 50  0000 L CNN
F 2 "Capacitor_SMD:C_1206_3216Metric_Pad1.42x1.75mm_HandSolder" H 8600 1550 50  0001 C CNN
F 3 "" H 8600 1550 50  0000 C CNN
	1    8600 1550
	0    1    1    0   
$EndComp
$Comp
L Device1:C_Small C12
U 1 1 5C421F4C
P 8600 1900
F 0 "C12" H 8610 1970 50  0000 L CNN
F 1 "100n" H 8610 1820 50  0000 L CNN
F 2 "Capacitor_SMD:C_1206_3216Metric_Pad1.42x1.75mm_HandSolder" H 8600 1900 50  0001 C CNN
F 3 "" H 8600 1900 50  0000 C CNN
	1    8600 1900
	0    1    1    0   
$EndComp
$Comp
L Device1:C_Small C13
U 1 1 5CA87C48
P 8600 2250
F 0 "C13" H 8610 2320 50  0000 L CNN
F 1 "100n" H 8610 2170 50  0000 L CNN
F 2 "Capacitor_SMD:C_1206_3216Metric_Pad1.42x1.75mm_HandSolder" H 8600 2250 50  0001 C CNN
F 3 "" H 8600 2250 50  0000 C CNN
	1    8600 2250
	0    1    1    0   
$EndComp
$Comp
L Device1:C_Small C14
U 1 1 5CA87C49
P 8600 2600
F 0 "C14" H 8610 2670 50  0000 L CNN
F 1 "100n" H 8610 2520 50  0000 L CNN
F 2 "Capacitor_SMD:C_1206_3216Metric_Pad1.42x1.75mm_HandSolder" H 8600 2600 50  0001 C CNN
F 3 "" H 8600 2600 50  0000 C CNN
	1    8600 2600
	0    1    1    0   
$EndComp
$Comp
L Device1:C_Small C15
U 1 1 5CA87C4A
P 8600 2950
F 0 "C15" H 8610 3020 50  0000 L CNN
F 1 "100n" H 8610 2870 50  0000 L CNN
F 2 "Capacitor_SMD:C_1206_3216Metric_Pad1.42x1.75mm_HandSolder" H 8600 2950 50  0001 C CNN
F 3 "" H 8600 2950 50  0000 C CNN
	1    8600 2950
	0    1    1    0   
$EndComp
Wire Wire Line
	2500 2600 2500 2350
Wire Wire Line
	2500 2800 2500 3050
Wire Wire Line
	2000 2350 1750 2350
Wire Wire Line
	1750 2350 1750 3050
Wire Wire Line
	1750 3050 2000 3050
Connection ~ 1750 2700
Connection ~ 2500 2350
Connection ~ 2500 3050
Wire Wire Line
	8700 850  8850 850 
Wire Wire Line
	8850 850  8850 2950
Wire Wire Line
	8850 2950 8700 2950
Wire Wire Line
	8700 2600 8850 2600
Connection ~ 8850 2600
Wire Wire Line
	8700 2250 8850 2250
Connection ~ 8850 2250
Wire Wire Line
	8700 1900 8850 1900
Connection ~ 8850 1900
Wire Wire Line
	8700 1550 8850 1550
Connection ~ 8850 1550
Wire Wire Line
	8700 1200 8850 1200
Connection ~ 8850 1200
Wire Wire Line
	8200 850  8500 850 
Wire Wire Line
	8300 850  8300 3200
Wire Wire Line
	7600 2950 8500 2950
Wire Wire Line
	7700 2600 8500 2600
Connection ~ 8300 2600
Wire Wire Line
	7800 2250 8500 2250
Connection ~ 8300 2250
Wire Wire Line
	7900 1900 8500 1900
Connection ~ 8300 1900
Wire Wire Line
	8000 1550 8500 1550
Connection ~ 8300 1550
Wire Wire Line
	8100 1200 8500 1200
Connection ~ 8300 1200
$Comp
L power1:GND #PWR039
U 1 1 5C422248
P 8850 1900
F 0 "#PWR039" H 8850 1650 50  0001 C CNN
F 1 "GND" H 8850 1750 50  0000 C CNN
F 2 "" H 8850 1900 50  0001 C CNN
F 3 "" H 8850 1900 50  0001 C CNN
	1    8850 1900
	0    -1   -1   0   
$EndComp
Text GLabel 8300 3200 3    39   Input ~ 0
VCC3V3
Connection ~ 8300 2950
Wire Wire Line
	5700 950  7600 950 
Wire Wire Line
	7600 950  7600 2950
Wire Wire Line
	5600 950  5600 900 
Wire Wire Line
	5600 900  7700 900 
Wire Wire Line
	7700 900  7700 2600
Wire Wire Line
	5500 950  5500 850 
Wire Wire Line
	5500 850  7800 850 
Wire Wire Line
	7800 850  7800 2250
Wire Wire Line
	5400 950  5400 800 
Wire Wire Line
	5400 800  7900 800 
Wire Wire Line
	7900 800  7900 1900
Wire Wire Line
	5300 950  5300 750 
Wire Wire Line
	5300 750  8000 750 
Wire Wire Line
	8000 750  8000 1550
Wire Wire Line
	5200 950  5200 700 
Wire Wire Line
	5200 700  8100 700 
Wire Wire Line
	8100 700  8100 1200
Wire Wire Line
	5100 950  5100 650 
Wire Wire Line
	5100 650  8200 650 
Wire Wire Line
	8200 650  8200 850 
Connection ~ 8300 850 
Text GLabel 4400 3750 0    39   BiDi ~ 0
mD0
Text GLabel 4400 3850 0    39   BiDi ~ 0
mD1
Text GLabel 4400 3950 0    39   BiDi ~ 0
mD2
Text GLabel 4400 4050 0    39   BiDi ~ 0
mD3
Text GLabel 4400 4150 0    39   BiDi ~ 0
mD4
Text GLabel 4400 4250 0    39   BiDi ~ 0
mD5
Text GLabel 4400 4350 0    39   BiDi ~ 0
mD6
Text GLabel 4400 4450 0    39   BiDi ~ 0
mD7
Text GLabel 4400 4650 0    39   BiDi ~ 0
mA0
Text GLabel 4400 4750 0    39   BiDi ~ 0
mA1
Text GLabel 4400 4850 0    39   BiDi ~ 0
mA2
Text GLabel 4400 4950 0    39   BiDi ~ 0
mA3
Text GLabel 4400 5050 0    39   BiDi ~ 0
mA4
Text GLabel 4400 5150 0    39   BiDi ~ 0
mA5
Text GLabel 4400 5250 0    39   BiDi ~ 0
mA6
Text GLabel 4400 5350 0    39   BiDi ~ 0
mA7
Text GLabel 6200 4650 2    39   BiDi ~ 0
mB02/PHI2
Text GLabel 6200 4750 2    39   BiDi ~ 0
~mS5
Text GLabel 6200 4850 2    39   BiDi ~ 0
~mS4
Text GLabel 6200 5050 2    39   BiDi ~ 0
~mCCTL
Text GLabel 6200 5150 2    39   BiDi ~ 0
mR/~W
Text GLabel 6200 3150 2    39   BiDi ~ 0
mRD5
Text GLabel 6200 4250 2    39   BiDi ~ 0
mSDCLK
Text GLabel 6200 4350 2    39   BiDi ~ 0
mSDO
Text GLabel 6200 4450 2    39   BiDi ~ 0
mSDI
$Comp
L Device1:R_Small R8
U 1 1 5CA87C4C
P 9950 3850
F 0 "R8" H 9980 3870 50  0000 L CNN
F 1 "220" H 9980 3810 50  0000 L CNN
F 2 "Resistor_SMD:R_1206_3216Metric_Pad1.42x1.75mm_HandSolder" H 9950 3850 50  0001 C CNN
F 3 "" H 9950 3850 50  0000 C CNN
	1    9950 3850
	1    0    0    -1  
$EndComp
$Comp
L atari23MTS_Upgrade-rescue:Led_Small D3
U 1 1 5CA87C4D
P 9950 3650
F 0 "D3" H 9900 3775 50  0000 L CNN
F 1 "LED.GREEN" H 9775 3550 50  0000 L CNN
F 2 "LED_SMD:LED_1206_3216Metric_Pad1.42x1.75mm_HandSolder" V 9950 3650 50  0001 C CNN
F 3 "" V 9950 3650 50  0000 C CNN
	1    9950 3650
	0    1    1    0   
$EndComp
Wire Wire Line
	9950 3550 9950 3400
$Comp
L power1:GND #PWR040
U 1 1 5CA87C4E
P 10100 3200
F 0 "#PWR040" H 10100 2950 50  0001 C CNN
F 1 "GND" H 10100 3050 50  0000 C CNN
F 2 "" H 10100 3200 50  0001 C CNN
F 3 "" H 10100 3200 50  0001 C CNN
	1    10100 3200
	-1   0    0    1   
$EndComp
Wire Wire Line
	5100 6450 5100 6650
Wire Wire Line
	5100 6650 5500 6650
Wire Wire Line
	5500 6650 5500 6450
Wire Wire Line
	5400 6450 5400 6650
Connection ~ 5400 6650
Wire Wire Line
	5300 6450 5300 6850
Connection ~ 5300 6650
Wire Wire Line
	5200 6450 5200 6650
Connection ~ 5200 6650
$Comp
L power1:GND #PWR041
U 1 1 5CA87C4F
P 5300 6850
F 0 "#PWR041" H 5300 6600 50  0001 C CNN
F 1 "GND" H 5300 6700 50  0000 C CNN
F 2 "" H 5300 6850 50  0001 C CNN
F 3 "" H 5300 6850 50  0001 C CNN
	1    5300 6850
	1    0    0    -1  
$EndComp
Text GLabel 6200 3350 2    39   BiDi ~ 0
mRD4
$Comp
L Device1:R_Small R9
U 1 1 5C4340D0
P 10300 3850
F 0 "R9" H 10330 3870 50  0000 L CNN
F 1 "220" H 10330 3810 50  0000 L CNN
F 2 "Resistor_SMD:R_1206_3216Metric_Pad1.42x1.75mm_HandSolder" H 10300 3850 50  0001 C CNN
F 3 "" H 10300 3850 50  0000 C CNN
	1    10300 3850
	1    0    0    -1  
$EndComp
$Comp
L atari23MTS_Upgrade-rescue:Led_Small D4
U 1 1 5C4340D8
P 10300 3650
F 0 "D4" H 10250 3775 50  0000 L CNN
F 1 "LED.RED" H 10125 3550 50  0000 L CNN
F 2 "LED_SMD:LED_1206_3216Metric_Pad1.42x1.75mm_HandSolder" V 10300 3650 50  0001 C CNN
F 3 "" V 10300 3650 50  0000 C CNN
	1    10300 3650
	0    1    1    0   
$EndComp
Wire Wire Line
	9950 3950 9950 4100
Wire Wire Line
	9950 4100 9500 4100
Wire Wire Line
	10300 3950 10300 4200
Wire Wire Line
	10300 4200 9500 4200
Text GLabel 9500 4100 0    39   BiDi Italic 8
LEDGRN
Text GLabel 9500 4200 0    39   BiDi Italic 8
LEDRED
Text Notes 8750 4450 0    59   ~ 12
GREEN LED (CARTRIDGE SWITCHING)
Text Notes 8750 4650 0    59   ~ 12
RED LED (BOARD OK)
Text GLabel 6200 2950 2    39   BiDi Italic 8
LEDGRN
Text GLabel 6200 3050 2    39   BiDi Italic 8
LEDRED
Text GLabel 6200 2650 2    39   BiDi ~ 0
SWDCLK_CART
Text GLabel 6200 2550 2    39   BiDi ~ 0
SWDIO_CART
NoConn ~ 6200 1950
NoConn ~ 6200 1850
NoConn ~ 6200 1750
Text GLabel 3100 4650 2    39   BiDi ~ 0
mSDCLK
Text GLabel 3150 4450 2    39   BiDi ~ 0
mSDO
Text GLabel 3200 4850 2    39   BiDi ~ 0
mSDI
$Comp
L Device1:R_Small R7
U 1 1 5C4392C7
P 2900 4250
F 0 "R7" H 2700 4250 50  0000 L CNN
F 1 "47k" H 2950 4250 50  0000 L CNN
F 2 "Resistor_SMD:R_1206_3216Metric_Pad1.42x1.75mm_HandSolder" H 2900 4250 50  0001 C CNN
F 3 "" H 2900 4250 50  0000 C CNN
	1    2900 4250
	1    0    0    -1  
$EndComp
Text GLabel 3600 4750 2    39   Input ~ 0
VCC3V3
$Comp
L Connector1:Micro_SD_Card_Det J9
U 1 1 5C439616
P 1500 4650
F 0 "J9" H 850 5350 50  0000 C CNN
F 1 "Micro_SD_Card_Det" H 2150 5350 50  0000 R CNN
F 2 "RetroBitLab:microSD_HC_Hirose_DM3D-SF" H 3550 5350 50  0001 C CNN
F 3 "" H 1500 4750 50  0001 C CNN
	1    1500 4650
	-1   0    0    1   
$EndComp
$Comp
L power1:GND #PWR042
U 1 1 5C439B80
P 2500 4550
F 0 "#PWR042" H 2500 4300 50  0001 C CNN
F 1 "GND" H 2500 4400 50  0000 C CNN
F 2 "" H 2500 4550 50  0001 C CNN
F 3 "" H 2500 4550 50  0001 C CNN
	1    2500 4550
	0    -1   -1   0   
$EndComp
Wire Wire Line
	2400 4550 2500 4550
NoConn ~ 700  4150
Wire Wire Line
	2400 4450 3150 4450
$Comp
L Device1:C_Small C8
U 1 1 5C43AFC5
P 3500 4950
F 0 "C8" H 3510 5020 50  0000 L CNN
F 1 "100n" H 3510 4870 50  0000 L CNN
F 2 "Capacitor_SMD:C_1206_3216Metric_Pad1.42x1.75mm_HandSolder" H 3500 4950 50  0001 C CNN
F 3 "" H 3500 4950 50  0000 C CNN
	1    3500 4950
	1    0    0    -1  
$EndComp
Wire Wire Line
	3500 5050 3500 5150
$Comp
L power1:GND #PWR043
U 1 1 5C43B2D3
P 3500 5150
F 0 "#PWR043" H 3500 4900 50  0001 C CNN
F 1 "GND" H 3500 5000 50  0000 C CNN
F 2 "" H 3500 5150 50  0001 C CNN
F 3 "" H 3500 5150 50  0001 C CNN
	1    3500 5150
	1    0    0    -1  
$EndComp
Wire Wire Line
	2400 4850 3200 4850
Wire Wire Line
	2400 4650 3100 4650
NoConn ~ 2400 4150
NoConn ~ 2400 4250
NoConn ~ 2400 4350
Wire Wire Line
	3600 4750 2400 4750
Wire Wire Line
	3500 4850 3500 4750
Connection ~ 3500 4750
Wire Wire Line
	2900 4350 2900 4450
Connection ~ 2900 4450
Text GLabel 2900 4000 1    39   Input ~ 0
VCC3V3
Wire Wire Line
	2900 4000 2900 4150
NoConn ~ 2400 4950
NoConn ~ 2400 5050
Text Notes 800  5600 0    59   ~ 12
MICROSD Card Connector in SPI MODE
$Comp
L Device1:R_Small R6
U 1 1 5CA87C50
P 2850 3050
F 0 "R6" H 2880 3070 50  0000 L CNN
F 1 "220" H 2880 3010 50  0000 L CNN
F 2 "Resistor_SMD:R_1206_3216Metric_Pad1.42x1.75mm_HandSolder" H 2850 3050 50  0001 C CNN
F 3 "" H 2850 3050 50  0000 C CNN
	1    2850 3050
	0    1    1    0   
$EndComp
$Comp
L Device1:R_Small R5
U 1 1 5C43FCB0
P 2850 2350
F 0 "R5" H 2880 2370 50  0000 L CNN
F 1 "0" H 2880 2310 50  0000 L CNN
F 2 "Resistor_SMD:R_1206_3216Metric_Pad1.42x1.75mm_HandSolder" H 2850 2350 50  0001 C CNN
F 3 "" H 2850 2350 50  0000 C CNN
	1    2850 2350
	0    1    1    0   
$EndComp
Wire Wire Line
	2200 3050 2750 3050
Wire Wire Line
	2200 2350 2750 2350
Wire Wire Line
	2950 2350 3600 2350
Wire Wire Line
	3600 2350 3600 2650
Wire Wire Line
	3600 2650 4400 2650
Wire Wire Line
	4400 2750 3600 2750
Wire Wire Line
	3600 2750 3600 3050
Wire Wire Line
	3600 3050 2950 3050
NoConn ~ 4400 3250
NoConn ~ 4400 3350
NoConn ~ 4400 3450
NoConn ~ 4400 3550
NoConn ~ 4400 3650
Text GLabel 4400 5450 0    39   BiDi ~ 0
mA8
Text GLabel 4400 5550 0    39   BiDi ~ 0
mA9
Text GLabel 4400 5650 0    39   BiDi ~ 0
mA10
Text GLabel 4400 5750 0    39   BiDi ~ 0
mA11
Text GLabel 4400 5850 0    39   BiDi ~ 0
mA12
Text GLabel 4400 5950 0    39   BiDi ~ 0
mA13
Text GLabel 4400 6050 0    39   BiDi ~ 0
mA14
Text GLabel 4400 6150 0    39   BiDi ~ 0
mA15
NoConn ~ 6200 2050
NoConn ~ 6200 2350
NoConn ~ 6200 2450
NoConn ~ 6200 2750
NoConn ~ 4400 3150
NoConn ~ 4400 3050
NoConn ~ 4400 2950
NoConn ~ 6200 1650
NoConn ~ 6200 1550
NoConn ~ 6200 1450
NoConn ~ 6200 1350
NoConn ~ 6200 1250
$Comp
L MCU_ST_STM32F41:STM32F407VGTx U13
U 1 1 5C61E27E
P 5300 3650
F 0 "U13" H 4600 6200 50  0000 L CNN
F 1 "STM32F407VGTx" H 5800 6200 50  0000 L CNN
F 2 "Package_QFP:TQFP-100-1EP_14x14mm_P0.5mm_EP5x5mm" H 4600 1050 50  0001 R CNN
F 3 "" H 5300 3650 50  0001 C CNN
	1    5300 3650
	1    0    0    -1  
$EndComp
NoConn ~ 6200 2250
NoConn ~ 6200 2150
NoConn ~ 6200 3250
NoConn ~ 6200 3450
NoConn ~ 6200 3550
NoConn ~ 6200 3650
NoConn ~ 6200 3750
NoConn ~ 6200 3850
NoConn ~ 6200 3950
NoConn ~ 6200 4050
NoConn ~ 6200 4150
NoConn ~ 6200 4950
NoConn ~ 6200 5250
NoConn ~ 6200 5350
NoConn ~ 6200 5450
NoConn ~ 6200 5550
NoConn ~ 6200 5650
NoConn ~ 6200 5750
NoConn ~ 6200 5850
NoConn ~ 6200 5950
NoConn ~ 6200 6050
NoConn ~ 6200 6150
Wire Wire Line
	9950 3400 10300 3400
Wire Wire Line
	10300 3400 10300 3550
Wire Wire Line
	10100 3200 10100 3400
Connection ~ 10100 3400
$EndSCHEMATC
