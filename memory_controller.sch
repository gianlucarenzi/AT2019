EESchema Schematic File Version 4
LIBS:atari23MTS_Upgrade-cache
EELAYER 26 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 5 5
Title "MCU STM32F407VET6 MEMORY CONTROLLER"
Date "2019-04-06"
Rev ""
Comp "RetroBit Lab"
Comment1 "MEMORY EXPANSION MPU Interface"
Comment2 "STM32F407 for RAM PORTB PIA Emulation"
Comment3 ""
Comment4 ""
$EndDescr
NoConn ~ 5000 950 
Text GLabel 4400 1250 0    39   Input ~ 0
nRESET_MEM
Text GLabel 4400 1450 0    39   Input ~ 0
BOOT0_MEM
NoConn ~ 4400 1650
NoConn ~ 4400 1750
Text GLabel 4400 1850 0    39   Input ~ 0
VCC3V3
$Comp
L Device1:Crystal_Small XT2
U 1 1 5C421B52
P 2500 2700
F 0 "XT2" H 2500 2800 50  0000 C CNN
F 1 "8Mhz" H 2500 2600 50  0000 C CNN
F 2 "RetroBitLab:Crystal_HC49-4H_Vertical_3D" H 2500 2700 50  0001 C CNN
F 3 "" H 2500 2700 50  0000 C CNN
	1    2500 2700
	0    1    1    0   
$EndComp
$Comp
L Device1:C_Small C16
U 1 1 5C421C91
P 2100 2350
F 0 "C16" H 2110 2420 50  0000 L CNN
F 1 "20p" H 2110 2270 50  0000 L CNN
F 2 "Capacitor_SMD:C_1206_3216Metric_Pad1.42x1.75mm_HandSolder" H 2100 2350 50  0001 C CNN
F 3 "" H 2100 2350 50  0000 C CNN
	1    2100 2350
	0    1    1    0   
$EndComp
$Comp
L Device1:C_Small C17
U 1 1 5CA87C42
P 2100 3050
F 0 "C17" H 2110 3120 50  0000 L CNN
F 1 "20p" H 2110 2970 50  0000 L CNN
F 2 "Capacitor_SMD:C_1206_3216Metric_Pad1.42x1.75mm_HandSolder" H 2100 3050 50  0001 C CNN
F 3 "" H 2100 3050 50  0000 C CNN
	1    2100 3050
	0    1    1    0   
$EndComp
$Comp
L power1:GND #PWR044
U 1 1 5CA87C43
P 1750 2700
F 0 "#PWR044" H 1750 2450 50  0001 C CNN
F 1 "GND" H 1750 2550 50  0000 C CNN
F 2 "" H 1750 2700 50  0001 C CNN
F 3 "" H 1750 2700 50  0001 C CNN
	1    1750 2700
	0    1    1    0   
$EndComp
$Comp
L Device1:C_Small C18
U 1 1 5C421E29
P 8600 850
F 0 "C18" H 8610 920 50  0000 L CNN
F 1 "100n" H 8610 770 50  0000 L CNN
F 2 "Capacitor_SMD:C_1206_3216Metric_Pad1.42x1.75mm_HandSolder" H 8600 850 50  0001 C CNN
F 3 "" H 8600 850 50  0000 C CNN
	1    8600 850 
	0    1    1    0   
$EndComp
$Comp
L Device1:C_Small C19
U 1 1 5C421EE5
P 8600 1200
F 0 "C19" H 8610 1270 50  0000 L CNN
F 1 "100n" H 8610 1120 50  0000 L CNN
F 2 "Capacitor_SMD:C_1206_3216Metric_Pad1.42x1.75mm_HandSolder" H 8600 1200 50  0001 C CNN
F 3 "" H 8600 1200 50  0000 C CNN
	1    8600 1200
	0    1    1    0   
$EndComp
$Comp
L Device1:C_Small C20
U 1 1 5C421F19
P 8600 1550
F 0 "C20" H 8610 1620 50  0000 L CNN
F 1 "100n" H 8610 1470 50  0000 L CNN
F 2 "Capacitor_SMD:C_1206_3216Metric_Pad1.42x1.75mm_HandSolder" H 8600 1550 50  0001 C CNN
F 3 "" H 8600 1550 50  0000 C CNN
	1    8600 1550
	0    1    1    0   
$EndComp
$Comp
L Device1:C_Small C21
U 1 1 5CA87C47
P 8600 1900
F 0 "C21" H 8610 1970 50  0000 L CNN
F 1 "100n" H 8610 1820 50  0000 L CNN
F 2 "Capacitor_SMD:C_1206_3216Metric_Pad1.42x1.75mm_HandSolder" H 8600 1900 50  0001 C CNN
F 3 "" H 8600 1900 50  0000 C CNN
	1    8600 1900
	0    1    1    0   
$EndComp
$Comp
L Device1:C_Small C22
U 1 1 5C421F82
P 8600 2250
F 0 "C22" H 8610 2320 50  0000 L CNN
F 1 "100n" H 8610 2170 50  0000 L CNN
F 2 "Capacitor_SMD:C_1206_3216Metric_Pad1.42x1.75mm_HandSolder" H 8600 2250 50  0001 C CNN
F 3 "" H 8600 2250 50  0000 C CNN
	1    8600 2250
	0    1    1    0   
$EndComp
$Comp
L Device1:C_Small C23
U 1 1 5C421FB7
P 8600 2600
F 0 "C23" H 8610 2670 50  0000 L CNN
F 1 "100n" H 8610 2520 50  0000 L CNN
F 2 "Capacitor_SMD:C_1206_3216Metric_Pad1.42x1.75mm_HandSolder" H 8600 2600 50  0001 C CNN
F 3 "" H 8600 2600 50  0000 C CNN
	1    8600 2600
	0    1    1    0   
$EndComp
$Comp
L Device1:C_Small C24
U 1 1 5C421FF7
P 8600 2950
F 0 "C24" H 8610 3020 50  0000 L CNN
F 1 "100n" H 8610 2870 50  0000 L CNN
F 2 "Capacitor_SMD:C_1206_3216Metric_Pad1.42x1.75mm_HandSolder" H 8600 2950 50  0001 C CNN
F 3 "" H 8600 2950 50  0000 C CNN
	1    8600 2950
	0    1    1    0   
$EndComp
Wire Wire Line
	2500 2600 2500 2350
Wire Wire Line
	2500 2800 2500 3050
Wire Wire Line
	2000 2350 1750 2350
Wire Wire Line
	1750 2350 1750 3050
Wire Wire Line
	1750 3050 2000 3050
Connection ~ 1750 2700
Connection ~ 2500 2350
Connection ~ 2500 3050
Wire Wire Line
	8700 850  8850 850 
Wire Wire Line
	8850 850  8850 2950
Wire Wire Line
	8850 2950 8700 2950
Wire Wire Line
	8700 2600 8850 2600
Connection ~ 8850 2600
Wire Wire Line
	8700 2250 8850 2250
Connection ~ 8850 2250
Wire Wire Line
	8700 1900 8850 1900
Connection ~ 8850 1900
Wire Wire Line
	8700 1550 8850 1550
Connection ~ 8850 1550
Wire Wire Line
	8700 1200 8850 1200
Connection ~ 8850 1200
Wire Wire Line
	8200 850  8500 850 
Wire Wire Line
	8300 850  8300 3200
Wire Wire Line
	7600 2950 8500 2950
Wire Wire Line
	7700 2600 8500 2600
Connection ~ 8300 2600
Wire Wire Line
	7800 2250 8500 2250
Connection ~ 8300 2250
Wire Wire Line
	7900 1900 8500 1900
Connection ~ 8300 1900
Wire Wire Line
	8000 1550 8500 1550
Connection ~ 8300 1550
Wire Wire Line
	8100 1200 8500 1200
Connection ~ 8300 1200
$Comp
L power1:GND #PWR045
U 1 1 5CA87C4B
P 8850 1900
F 0 "#PWR045" H 8850 1650 50  0001 C CNN
F 1 "GND" H 8850 1750 50  0000 C CNN
F 2 "" H 8850 1900 50  0001 C CNN
F 3 "" H 8850 1900 50  0001 C CNN
	1    8850 1900
	0    -1   -1   0   
$EndComp
Text GLabel 8300 3200 3    39   Input ~ 0
VCC3V3
Connection ~ 8300 2950
Wire Wire Line
	5700 950  7600 950 
Wire Wire Line
	7600 950  7600 2950
Wire Wire Line
	5600 950  5600 900 
Wire Wire Line
	5600 900  7700 900 
Wire Wire Line
	7700 900  7700 2600
Wire Wire Line
	5500 950  5500 850 
Wire Wire Line
	5500 850  7800 850 
Wire Wire Line
	7800 850  7800 2250
Wire Wire Line
	5400 950  5400 800 
Wire Wire Line
	5400 800  7900 800 
Wire Wire Line
	7900 800  7900 1900
Wire Wire Line
	5300 950  5300 750 
Wire Wire Line
	5300 750  8000 750 
Wire Wire Line
	8000 750  8000 1550
Wire Wire Line
	5200 950  5200 700 
Wire Wire Line
	5200 700  8100 700 
Wire Wire Line
	8100 700  8100 1200
Wire Wire Line
	5100 950  5100 650 
Wire Wire Line
	5100 650  8200 650 
Wire Wire Line
	8200 650  8200 850 
Connection ~ 8300 850 
Text GLabel 4400 3750 0    39   BiDi ~ 0
mD0
Text GLabel 4400 3850 0    39   BiDi ~ 0
mD1
Text GLabel 4400 3950 0    39   BiDi ~ 0
mD2
Text GLabel 4400 4050 0    39   BiDi ~ 0
mD3
Text GLabel 4400 4150 0    39   BiDi ~ 0
mD4
Text GLabel 4400 4250 0    39   BiDi ~ 0
mD5
Text GLabel 4400 4350 0    39   BiDi ~ 0
mD6
Text GLabel 4400 4450 0    39   BiDi ~ 0
mD7
Text GLabel 4400 4650 0    39   BiDi ~ 0
mA0
Text GLabel 4400 4750 0    39   BiDi ~ 0
mA1
Text GLabel 4400 4850 0    39   BiDi ~ 0
mA2
Text GLabel 4400 4950 0    39   BiDi ~ 0
mA3
Text GLabel 4400 5050 0    39   BiDi ~ 0
mA4
Text GLabel 4400 5150 0    39   BiDi ~ 0
mA5
Text GLabel 4400 5250 0    39   BiDi ~ 0
mA6
Text GLabel 4400 5350 0    39   BiDi ~ 0
mA7
Text GLabel 6200 4650 2    39   BiDi ~ 0
mB02/PHI2
Text GLabel 6200 4750 2    39   BiDi ~ 0
~mS5
Text GLabel 6200 4850 2    39   BiDi ~ 0
~mS4
Text GLabel 6200 5050 2    39   BiDi ~ 0
~mCCTL
Text GLabel 6200 5150 2    39   BiDi ~ 0
mR/~W
$Comp
L Device1:R_Small R16
U 1 1 5C422FC6
P 9950 3850
F 0 "R16" H 9980 3870 50  0000 L CNN
F 1 "220" H 9980 3810 50  0000 L CNN
F 2 "Resistor_SMD:R_1206_3216Metric_Pad1.42x1.75mm_HandSolder" H 9950 3850 50  0001 C CNN
F 3 "" H 9950 3850 50  0000 C CNN
	1    9950 3850
	1    0    0    -1  
$EndComp
$Comp
L atari23MTS_Upgrade-rescue:Led_Small D5
U 1 1 5C423143
P 9950 3650
F 0 "D5" H 9900 3775 50  0000 L CNN
F 1 "LED.GREEN" H 9775 3550 50  0000 L CNN
F 2 "LED_SMD:LED_1206_3216Metric_Pad1.42x1.75mm_HandSolder" V 9950 3650 50  0001 C CNN
F 3 "" V 9950 3650 50  0000 C CNN
	1    9950 3650
	0    1    1    0   
$EndComp
Wire Wire Line
	9950 3550 9950 3400
$Comp
L power1:GND #PWR046
U 1 1 5C42325A
P 9950 3400
F 0 "#PWR046" H 9950 3150 50  0001 C CNN
F 1 "GND" H 9950 3250 50  0000 C CNN
F 2 "" H 9950 3400 50  0001 C CNN
F 3 "" H 9950 3400 50  0001 C CNN
	1    9950 3400
	-1   0    0    1   
$EndComp
Wire Wire Line
	5100 6450 5100 6650
Wire Wire Line
	5100 6650 5500 6650
Wire Wire Line
	5500 6650 5500 6450
Wire Wire Line
	5400 6450 5400 6650
Connection ~ 5400 6650
Wire Wire Line
	5300 6450 5300 6850
Connection ~ 5300 6650
Wire Wire Line
	5200 6450 5200 6650
Connection ~ 5200 6650
$Comp
L power1:GND #PWR047
U 1 1 5C4234AD
P 5300 6850
F 0 "#PWR047" H 5300 6600 50  0001 C CNN
F 1 "GND" H 5300 6700 50  0000 C CNN
F 2 "" H 5300 6850 50  0001 C CNN
F 3 "" H 5300 6850 50  0001 C CNN
	1    5300 6850
	1    0    0    -1  
$EndComp
Wire Wire Line
	9950 3950 9950 4100
Wire Wire Line
	9950 4100 9500 4100
Text GLabel 9500 4100 0    39   BiDi Italic 8
LEDGRN_MEM
Text Notes 8600 4300 0    59   ~ 12
GREEN LED (MEMORY EXPANSION USAGE)
Text GLabel 6200 2950 2    39   BiDi Italic 8
LEDGRN_MEM
Text GLabel 6200 2650 2    39   BiDi ~ 0
SWDCLK_MEM
Text GLabel 6200 2550 2    39   BiDi ~ 0
SWDIO_MEM
NoConn ~ 6200 1950
NoConn ~ 6200 1850
NoConn ~ 6200 1750
NoConn ~ 700  4150
$Comp
L Device1:R_Small R11
U 1 1 5C43FC39
P 2850 3050
F 0 "R11" H 2880 3070 50  0000 L CNN
F 1 "220" H 2880 3010 50  0000 L CNN
F 2 "Resistor_SMD:R_1206_3216Metric_Pad1.42x1.75mm_HandSolder" H 2850 3050 50  0001 C CNN
F 3 "" H 2850 3050 50  0000 C CNN
	1    2850 3050
	0    1    1    0   
$EndComp
$Comp
L Device1:R_Small R10
U 1 1 5CA87C51
P 2850 2350
F 0 "R10" H 2880 2370 50  0000 L CNN
F 1 "0" H 2880 2310 50  0000 L CNN
F 2 "Resistor_SMD:R_1206_3216Metric_Pad1.42x1.75mm_HandSolder" H 2850 2350 50  0001 C CNN
F 3 "" H 2850 2350 50  0000 C CNN
	1    2850 2350
	0    1    1    0   
$EndComp
Wire Wire Line
	2200 3050 2750 3050
Wire Wire Line
	2200 2350 2750 2350
Wire Wire Line
	2950 2350 3600 2350
Wire Wire Line
	3600 2350 3600 2650
Wire Wire Line
	3600 2650 4400 2650
Wire Wire Line
	4400 2750 3600 2750
Wire Wire Line
	3600 2750 3600 3050
Wire Wire Line
	3600 3050 2950 3050
NoConn ~ 4400 3250
NoConn ~ 4400 3350
NoConn ~ 4400 3450
NoConn ~ 4400 3550
NoConn ~ 4400 3650
Text GLabel 4400 5450 0    39   BiDi ~ 0
mA8
Text GLabel 4400 5550 0    39   BiDi ~ 0
mA9
Text GLabel 4400 5650 0    39   BiDi ~ 0
mA10
Text GLabel 4400 5750 0    39   BiDi ~ 0
mA11
Text GLabel 4400 5850 0    39   BiDi ~ 0
mA12
Text GLabel 4400 5950 0    39   BiDi ~ 0
mA13
Text GLabel 4400 6050 0    39   BiDi ~ 0
mA14
Text GLabel 4400 6150 0    39   BiDi ~ 0
mA15
NoConn ~ 6200 2050
NoConn ~ 6200 2350
NoConn ~ 6200 2450
NoConn ~ 6200 2750
NoConn ~ 4400 3150
NoConn ~ 4400 3050
NoConn ~ 4400 2950
NoConn ~ 6200 1650
NoConn ~ 6200 1550
NoConn ~ 6200 1450
NoConn ~ 6200 1350
NoConn ~ 6200 1250
$Comp
L MCU_ST_STM32F41:STM32F407VGTx U14
U 1 1 5CA87C52
P 5300 3650
F 0 "U14" H 4600 6200 50  0000 L CNN
F 1 "STM32F407VGTx" H 5800 6200 50  0000 L CNN
F 2 "Package_QFP:TQFP-100-1EP_14x14mm_P0.5mm_EP5x5mm" H 4600 1050 50  0001 R CNN
F 3 "" H 5300 3650 50  0001 C CNN
	1    5300 3650
	1    0    0    -1  
$EndComp
NoConn ~ 6200 4950
NoConn ~ 6200 5250
NoConn ~ 6200 5350
$Comp
L Device1:R_Small R12
U 1 1 5CA875A2
P 6450 1900
F 0 "R12" H 6480 1920 50  0000 L CNN
F 1 "10K" H 6480 1860 50  0000 L CNN
F 2 "Resistor_SMD:R_1206_3216Metric_Pad1.42x1.75mm_HandSolder" H 6450 1900 50  0001 C CNN
F 3 "" H 6450 1900 50  0000 C CNN
	1    6450 1900
	1    0    0    -1  
$EndComp
Wire Wire Line
	6450 1800 6450 1650
$Comp
L power1:GND #PWR048
U 1 1 5CA875AF
P 6450 1650
F 0 "#PWR048" H 6450 1400 50  0001 C CNN
F 1 "GND" H 6450 1500 50  0000 C CNN
F 2 "" H 6450 1650 50  0001 C CNN
F 3 "" H 6450 1650 50  0001 C CNN
	1    6450 1650
	-1   0    0    1   
$EndComp
$Comp
L Device1:R_Small R13
U 1 1 5CA87673
P 6950 2000
F 0 "R13" H 6980 2020 50  0000 L CNN
F 1 "10K" H 6980 1960 50  0000 L CNN
F 2 "Resistor_SMD:R_1206_3216Metric_Pad1.42x1.75mm_HandSolder" H 6950 2000 50  0001 C CNN
F 3 "" H 6950 2000 50  0000 C CNN
	1    6950 2000
	1    0    0    -1  
$EndComp
Wire Wire Line
	6950 1900 6950 1750
$Comp
L power1:GND #PWR049
U 1 1 5CA87680
P 6950 1750
F 0 "#PWR049" H 6950 1500 50  0001 C CNN
F 1 "GND" H 6950 1600 50  0000 C CNN
F 2 "" H 6950 1750 50  0001 C CNN
F 3 "" H 6950 1750 50  0001 C CNN
	1    6950 1750
	-1   0    0    1   
$EndComp
Wire Wire Line
	6950 2250 6950 2100
Text GLabel 6550 2150 2    39   BiDi ~ 0
UART_TX
Wire Wire Line
	6550 2150 6200 2150
Wire Wire Line
	6450 2000 6450 2150
Connection ~ 6450 2150
Text GLabel 7050 2250 2    39   BiDi ~ 0
UART_RX
Wire Wire Line
	6200 2250 7050 2250
Connection ~ 6950 2250
Text GLabel 6450 5450 2    39   BiDi ~ 0
mB0
Text GLabel 6450 5550 2    39   BiDi ~ 0
mB1
Text GLabel 6450 5650 2    39   BiDi ~ 0
mB2
Text GLabel 6450 5750 2    39   BiDi ~ 0
mB3
Text GLabel 6450 5850 2    39   BiDi ~ 0
mB4
Text GLabel 6450 5950 2    39   BiDi ~ 0
mB5
Wire Wire Line
	6200 5450 6450 5450
Wire Wire Line
	6200 5550 6450 5550
Wire Wire Line
	6200 5650 6450 5650
Wire Wire Line
	6450 5750 6200 5750
Wire Wire Line
	6200 5850 6450 5850
Wire Wire Line
	6450 5950 6200 5950
Text Notes 6750 5650 0    39   ~ 8
64 of 16K banks addressable (TOTAL 1024K)
Text GLabel 6750 6050 2    39   BiDi ~ 0
mB6
Text GLabel 6750 6150 2    39   BiDi ~ 0
mB7
Wire Wire Line
	6200 6150 6750 6150
$Comp
L Device1:R_Small R15
U 1 1 5CA87656
P 7850 6150
F 0 "R15" V 7750 5900 50  0000 L CNN
F 1 "0" H 7880 6110 50  0000 L CNN
F 2 "Resistor_SMD:R_1206_3216Metric_Pad1.42x1.75mm_HandSolder" H 7850 6150 50  0001 C CNN
F 3 "" H 7850 6150 50  0001 C CNN
	1    7850 6150
	0    -1   -1   0   
$EndComp
$Comp
L Device1:R_Small R14
U 1 1 5CA87774
P 7850 5950
F 0 "R14" V 7750 5700 50  0000 L CNN
F 1 "0" H 7880 5910 50  0000 L CNN
F 2 "Resistor_SMD:R_1206_3216Metric_Pad1.42x1.75mm_HandSolder" H 7850 5950 50  0001 C CNN
F 3 "" H 7850 5950 50  0001 C CNN
	1    7850 5950
	0    -1   -1   0   
$EndComp
Wire Wire Line
	6200 6050 6750 6050
$Comp
L power1:GND #PWR050
U 1 1 5CA883BF
P 7950 5950
F 0 "#PWR050" H 7950 5700 50  0001 C CNN
F 1 "GND" H 7950 5800 50  0000 C CNN
F 2 "" H 7950 5950 50  0001 C CNN
F 3 "" H 7950 5950 50  0001 C CNN
	1    7950 5950
	0    -1   -1   0   
$EndComp
$Comp
L power1:GND #PWR051
U 1 1 5CA8840A
P 7950 6150
F 0 "#PWR051" H 7950 5900 50  0001 C CNN
F 1 "GND" H 7950 6000 50  0000 C CNN
F 2 "" H 7950 6150 50  0001 C CNN
F 3 "" H 7950 6150 50  0001 C CNN
	1    7950 6150
	0    -1   -1   0   
$EndComp
Text GLabel 7750 5950 0    39   BiDi ~ 0
mB6
Text GLabel 7750 6150 0    39   BiDi ~ 0
mB7
Text Notes 8350 6400 2    60   ~ 12
TEST RAM UP TO 4M
Text GLabel 6200 3050 2    39   Output ~ 0
TP1
Text GLabel 6200 4350 2    39   BiDi ~ 0
~mREF
Text GLabel 6200 4250 2    39   BiDi ~ 0
~mRST
Text GLabel 6200 4150 2    39   BiDi ~ 0
~mIRQ
Text GLabel 6200 4050 2    39   BiDi ~ 0
~mMPD
Text GLabel 6200 3950 2    39   BiDi ~ 0
~mHALT
Text GLabel 6200 3850 2    39   BiDi ~ 0
~mD1XX
Text GLabel 6200 3750 2    39   BiDi ~ 0
~mEXSEL
NoConn ~ 6200 3650
NoConn ~ 6200 3550
NoConn ~ 6200 3450
NoConn ~ 6200 3350
NoConn ~ 6200 3250
Text GLabel 6200 4450 2    39   BiDi ~ 0
~mD8XX-DFXX
Text GLabel 6200 3150 2    39   BiDi ~ 0
mPBISEL
$EndSCHEMATC
